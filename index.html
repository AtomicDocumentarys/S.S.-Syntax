<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S.S. Syntax | Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Essential Inline CSS for Visibility */
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .server-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 20px; padding: 20px; }
        .server-card { background: #112240; padding: 15px; border-radius: 8px; text-align: center; cursor: pointer; border: 2px solid transparent; transition: 0.3s; }
        .server-card:hover { border-color: #64ffda; }
        .server-icon img { width: 64px; height: 64px; border-radius: 50%; }
        .code-editor-container textarea { width: 100%; height: 300px; background: #020c1b; color: #64ffda; font-family: monospace; padding: 10px; border: 1px solid #233554; }
    </style>
</head>
<body>
    <div class="container">
        <header class="dashboard-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">S.S. Syntax</div>
                    <div class="tagline">The Premier Vessel for Your Source Sauce</div>
                </div>
                <div class="user-section" id="userSection">
                    <div id="userInfo">
                        <button class="btn-login" onclick="login()">Login with Discord</button>
                    </div>
                </div>
            </div>
            <nav class="nav-tabs" id="navTabs" style="display: none;">
                <button class="tab-btn active" onclick="showTab('server-tab')">Server Management</button>
                <button class="tab-btn" onclick="showTab('command-tab')">Command Builder</button>
            </nav>
        </header>

        <main class="dashboard-main">
            <div id="server-tab" class="tab-content active">
                <h2>Select a Server</h2>
                <div class="server-grid" id="serverGrid">
                    <p>Please login to see your servers.</p>
                </div>
            </div>

            <div id="command-tab" class="tab-content">
                <h2>Command Builder</h2>
                <div class="command-form">
                    <div class="form-group">
                        <label>Command Name</label>
                        <input type="text" id="commandName" placeholder="e.g., hello">
                    </div>
                    <div class="form-group">
                        <label>Trigger Type</label>
                        <select id="commandType" onchange="updateTriggerOptions()">
                            <option value="prefix">Prefix (!cmd)</option>
                            <option value="message">Keyword Match</option>
                        </select>
                    </div>
                    <div id="prefixGroup" class="form-group">
                        <label>Prefix</label>
                        <input type="text" id="commandPrefix" value="!">
                    </div>
                    <div id="triggerGroup" class="form-group" style="display:none;">
                        <label>Trigger Word</label>
                        <input type="text" id="commandTrigger">
                    </div>
                    <div class="form-group">
                        <label>Language</label>
                        <select id="commandLanguage" onchange="applyTemplate()">
                            <option value="js">JavaScript</option>
                            <option value="py">Python</option>
                            <option value="go">Go</option>
                        </select>
                    </div>
                    <div class="code-editor-container">
                        <div class="editor-header"><span id="languageDisplay">JavaScript</span></div>
                        <textarea id="commandCode"></textarea>
                    </div>
                    <button class="btn-login" onclick="validateAndCreateCommand()" style="margin-top:20px;">Deploy Command</button>
                </div>
            </div>
        </main>
    </div>

    <script src="auth.js"></script>
    <script src="server-viewer.js"></script>
    <script src="command-builder.js"></script>
    <script>
        // Tab Switching Logic
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
        }

        // Login Redirect using YOUR URL
        function login() {
            window.location.href = "https://discord.com/oauth2/authorize?client_id=1466792124686008341&response_type=code&redirect_uri=http%3A%2F%2Flocalhost%2Fcallback.html&scope=identify+email+guilds";
        }

        // Language Templates
        const templates = {
            js: `return "Hello from JS!";`,
            py: `print("Hello from Python!")`,
            go: `fmt.Printf("Hello from Go!")`
        };

        function applyTemplate() {
            const lang = document.getElementById('commandLanguage').value;
            document.getElementById('commandCode').value = templates[lang];
            document.getElementById('languageDisplay').innerText = lang.toUpperCase();
        }

        function updateTriggerOptions() {
            const type = document.getElementById('commandType').value;
            document.getElementById('prefixGroup').style.display = type === 'prefix' ? 'block' : 'none';
            document.getElementById('triggerGroup').style.display = type === 'message' ? 'block' : 'none';
        }

        // Initialize
        window.onload = () => {
            applyTemplate();
            checkAuth().then(token => {
                if (token) loadServers();
            });
        };
    </script>
</body>
                                </html>
                            
